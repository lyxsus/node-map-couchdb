var Q = require('q'),
    Vow = require('./lib/vow'),
    When = require('when');

//var d = Vow.promise();
//
//d.fail(function(e) {
//    console.log('rejected');
//});
//
//d.then(null, null, function(v) {
//    console.log(v);
//    return 'D';
//}).then(function(v) {
//    console.log(v);
//});
//
//d.notify(1);
//console.log('1-2');
//d.notify(2);
//d.fulfill('R');
//d.notify(3);
//

//var d = Q.defer();
//
//var p = d.promise.then(null, null, function() {
//    throw Error('err');
//});
//
//p.then(
//    function(v) {
//       console.log('f', v);
//    },
//    null,
//    function(v) {
//       console.log(v);
//    });
//
//d.notify(1);

var d = Vow.promise();

var p = d.then(null, null, function() {
    throw Error('err');
});

p.then(
    function(v) {
       console.log('f', v);
    },
    null,
    function(v) {
       console.log(v);
    });

d.notify(1);